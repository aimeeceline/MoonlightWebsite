@use "sass:map";
@import "./src/styles/pages/all.scss";

// ====== Safe theme lookups + fallback ======
$desc-color: if(
  map.has-key($theme-colors, "decriptions"),
  map.get($theme-colors, "decriptions"),
  if(
    map.has-key($theme-colors, "descriptions"),
    map.get($theme-colors, "descriptions"),
    #333
  )
);

$primary-color: if(
  map.has-key($theme-colors, "primary"),
  map.get($theme-colors, "primary"),
  #0ea5e9
);

$border-color: #e5e7eb; // gray-200
$bg-soft: #f8fafc;      // slate-50
$bg-soft-hover: #f1f5f9;// slate-100
$text-strong: #111827;  // gray-900

.quantity_container {
  color: $desc-color;
  display: flex;
  align-items: center;
  gap: 16px;
  user-select: none; // bấm +/− không bị bôi đen chữ

  .quantity {
    display: inline-flex;
    align-items: stretch;
    height: 48px;
    background: #fff;
    border: 1px solid $border-color;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 1px 2px rgba(0,0,0,.03);

    // Nút +/−
    .qtybtn {
      width: 44px;
      min-width: 44px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      line-height: 1;
      background: $bg-soft;
      color: red;
      cursor: pointer;
      border: 0;

      // chia ranh giới nút
      &:first-child { border-right: 1px solid $border-color; }
      &:last-child  { border-left:  1px solid $border-color; }

      &:hover { background: $bg-soft-hover; }
      &:active { transform: scale(0.98); }

      // trạng thái disabled nếu em set thêm class hoặc attr
      &.disabled,
      &:disabled {
        background: #eee;
        color: #9ca3af;
        cursor: not-allowed;
        pointer-events: none;
      }
    }

    // Input số lượng
    input {
      width: 64px;
      padding: 0 6px;
      text-align: center;
      border: 0;
      outline: none;
      background: #fff;
      color: $text-strong;
      font-weight: 600;
      font-variant-numeric: tabular-nums; // số canh đều
      // giữ cùng chiều cao khối
      height: 100%;

      // Ẩn mũi tên tăng/giảm (Chrome/Safari/Edge)
      &::-webkit-outer-spin-button,
      &::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      // Ẩn mũi tên (Firefox)
      -moz-appearance: textfield;

      // Focus ring rõ ràng, không lệch layout
      &:focus-visible {
        outline: 2px solid rgba($primary-color, 0.6);
        outline-offset: -2px;
      }
    }

    // Nếu em vẫn có span bao icon thì vẫn ổn:
    span {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0 4px;
      cursor: pointer;
    }
  }
}

// Nút submit: hỗ trợ cả class .disabled và thuộc tính disabled
.button-submit {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 44px;
  width: 100px;
  padding: 0 16px;
  border-radius: 10px;
  background: $primary-color;
  color: #fff;
  font-weight: 600;
  border: 0;
  transition: transform .05s ease, opacity .15s ease, background .15s ease;

  &:hover { filter: brightness(0.98); }
  &:active { transform: translateY(1px); }

  &.disabled,
  &:disabled {
    background-color: #ccc !important;
    color: #666 !important;
    cursor: not-allowed;
    opacity: 0.6;
    pointer-events: none;
  }
}

/* Responsive tweak */
@media (max-width: 480px) {
  .quantity_container {
    gap: 12px;

    .quantity {
      height: 44px;

      .qtybtn { width: 40px; min-width: 40px; font-size: 16px; }
      input   { width: 56px; }
    }
  }

  .button-submit { height: 42px; padding: 0 14px; }
}
